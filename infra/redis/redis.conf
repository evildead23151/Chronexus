# Sentinel Redis Configuration
# Optimized for Streams-based event queue

# ─── Network ─────────────────────────────────────────────────
bind 0.0.0.0
port 6379
protected-mode no
timeout 300
tcp-keepalive 60

# ─── Memory ──────────────────────────────────────────────────
maxmemory 512mb
maxmemory-policy allkeys-lru

# ─── Persistence (AOF for streams durability) ────────────────
appendonly yes
appendfsync everysec
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

# ─── Streams ─────────────────────────────────────────────────
# Max stream length before trimming (keep last N entries)
# Managed per-stream at application level
stream-node-max-bytes 4096
stream-node-max-entries 100

# ─── Logging ─────────────────────────────────────────────────
loglevel notice
